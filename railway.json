{
    "build": {
        "builder": "NIXPACKS"
    },
    "deploy": {
        "startCommand": "php -S 0.0.0.0:$PORT -t public",
        "healthcheckPath": "/api/health"
    },
    "nixpacks": {
        "providers": ["php"],
        "phases": {
            "setup": {
                "nixPkgs": [
                    "php82",
                    "php82Packages.composer",
                    "php82Extensions.sockets"
                ]
            },
            "install": {
                "cmds": [
                    "composer install --optimize-autoloader --no-scripts --no-interaction --ignore-platform-req=ext-sockets"
                ]
            }
        }
    }
}
